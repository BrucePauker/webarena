<?php
namespace App\Controller;

use App\Controller\AppController;
use App\Model\Entity\Arena;
/**
 * Arenas Controller
 *
 *
 */
class ArenasController extends AppController
{
    /**
     * @var Arena Model
     */
    protected $arena;

    /**
     * @var Fighter Model
     */
    protected $fighters;


    public function initialize()
    {
        parent::initialize(); // TODO: Change the autogenerated stub
        $this->arena = new Arena();
        $this->fighters = $this->loadModel('Fighters');
    }

    /**
     * Index method
     *
     * @return \Cake\Http\Response|void
     */
    public function index()
    {
        
    }

    /**
     * Check if a position on the map is free
     *
     * @param $x integer
     * @param $y intger
     * @return boolean
     */
    public function isPositionFree($x, $y)
    {
        if($x > $this->arena->_getSizeX() || $x < 0)
            return false;
        else if($y < 0 || $y > $this->arena->_getSizeY())
            return false;

        $fighters = $this->fighters->find('all')->toArray();

        foreach ($fighters as $fighter)
        {
            if($fighter->coordinate_x == $x || $fighter->coordinate_y == $y)
                return false;
        }

        return true;
    }
}
